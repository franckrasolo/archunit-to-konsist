---
title: ARCHITECTURE RULES IN KOTLIN
sub_title: from ArchUnit to Konsist
event: "Source Talks: On Kotlin #9"
location: Softwire, London
date: 19 September 2024
authors:
  - Franck Rasolo
  - Founding Partner ‚Äì Clockwork
  - Director ‚Äì Typesafe Solutions
theme:
  override:
    headings:
      h4:
        prefix: "‚ñà‚ñà‚ñà"
      h5:
        prefix: "‚ñà‚ñà‚ñà"
        colors:
          foreground: "8bd5ca"
      h6:
        prefix: "‚ñà‚ñà‚ñà"
        colors:
          foreground: "7c76bb"
---

<!-- markdownlint-disable -->

ARCHITECTURE PATTERN
---

<!-- cmd:pause -->

We'll focus on _**some**_ of the rules of the Ports & Adapters architecture pattern.

<!-- cmd:pause -->

![image:width:80%](images/hexagonal-architecture.webp)

<!-- cmd:end_slide -->

PORTS & ADAPTERS
---

<!-- cmd:pause -->

# Quick Recap

<!-- cmd:pause -->

<!-- cmd:incremental_lists: true -->

- Domain Model
- Use Cases
- Application

<!-- cmd:incremental_lists: false -->

<!-- cmd:pause -->

- Ports: Driving | Primary | In
- Ports: Driven | Secondary | Out

<!-- cmd:pause -->

- Adapters: Driving | Primary | In
- Adapters: Driven | Secondary | Out

<!-- cmd:new_lines: 2 -->

<!-- cmd:pause -->

# Cardinal Rule

_**Dependencies go inwards!**_

<!-- cmd:end_slide -->

IMPLEMENTATION
---

<!-- cmd:pause -->

# What do these rules look like?

<!-- cmd:pause -->

```kotlin
@Testable
fun `domain model does not access...`()

@Testable
fun `ports do not access...`()

@Testable
fun `hubs can only access...`()
```

<!-- cmd:new_lines: 1 -->

<!-- cmd:pause -->

Now let's see how they're implemented side-by-side!

<!-- cmd:end_slide -->

SUMMARY
---

<!-- cmd:column_layout: [1, 1] -->

<!-- cmd:pause -->

<!-- cmd:column: 0 -->

![image:width:40%](images/ArchUnit.png)

<!-- cmd:new_lines: 1 -->

<!-- cmd:column: 1 -->

![image:width:47%](images/Konsist.png)

<!-- cmd:pause -->

<!-- cmd:column: 0 -->

<!-- cmd:new_lines: 2 -->

##### PROS

<!-- cmd:pause -->

‚Ä¢ rich & stable feature set

<!-- cmd:pause -->

‚Ä¢ detection of package cycles

<!-- cmd:pause -->

#### CONS

<!-- cmd:pause -->

‚Ä¢ fluent Java API is verbose

<!-- cmd:pause -->

‚Ä¢ classpath scan => JVM only

<!-- cmd:pause -->

‚Ä¢ quite slow if misconfigured

<!-- cmd:new_lines: 0 -->

<!-- cmd:pause -->

<!-- cmd:column: 1 -->

<!-- cmd:new_lines: 2 -->

##### PROS

<!-- cmd:pause -->

‚Ä¢ tailor-made for Kotlin

<!-- cmd:pause -->

‚Ä¢ scans Kotlin files

<!-- cmd:pause -->

‚Ä¢ knows language features

<!-- cmd:pause -->

‚Ä¢ supports Android & KMP

<!-- cmd:pause -->

‚Ä¢ extensive docs

<!-- cmd:pause -->

#### CONS

<!-- cmd:pause -->

‚Ä¢ a few missing features

<!-- cmd:end_slide -->

RESOURCES
---

<!-- cmd:pause -->

## Repo

ÓÆ° &nbsp; [GitHub](https://github.com/franckrasolo/archunit-to-konsist)

<!-- cmd:pause -->

## Konsist Documentation

[Konsist](https://docs.konsist.lemonappdev.com/)

- Architecture Assertion
- Architecture Snippets
- Clean Architecture Snippets

<!-- cmd:pause -->

## YouTube

Dave Leeds: A Tour Through Konsist with Igor Wojda

Û∞óÉ &nbsp; [Video](https://youtu.be/AlYTvzwZOc4)

<!-- cmd:end_slide -->

THANKS!
---

<!-- cmd:column_layout: [1, 1] -->

<!-- cmd:column: 0 -->

# Franck Rasolo

‚è∑ Principal Consultant

&nbsp; ‚ñ∏ Platform Engineering

&nbsp; ‚ñ∏ DevOps Enablement

&nbsp; ‚ñ∏ Mentorship

<!-- cmd:new_lines: 1 -->

<!-- cmd:pause -->

ÔÇå &nbsp; ÓÆ° &nbsp; Û∞´ë

[LinkedIn](https://linkedin.com/in/franckrasolo)

[Mastodon](https://mas.to/@franckrasolo)

<!-- cmd:column: 1 -->

<!-- cmd:pause -->

<!-- https://vfunction.com/blog/four-ways-software-architects-can-manage-technical-debt/ -->

> Architectural drift can quickly grow into architectural technical debt that no one wants to touch.

_-- Bob Quillin, vFunction_

<!-- cmd:new_lines: 1 -->

<!-- cmd:pause -->

###### _We're Clockwork!_ üöÄ

<!-- cmd:pause -->

###### [clockwork.ing](https://clockwork.ing)

![image:width:48%](images/clockwork.png)

###### _Follow us on LinkedIn!_
